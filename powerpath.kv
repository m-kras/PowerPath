#:import Factory kivy.factory.Factory
#:import sp kivy.metrics.sp


<Button>:
    font_name: "data/DejaVuSansMono.ttf"

<Label>:
    font_name: "data/DejaVuSansMono.ttf"

<Spinner>:
    font_name: "data/DejaVuSansMono.ttf"

<TextInput>:
    font_name: "data/DejaVuSansMono.ttf"


<MyScreenManager>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size


<HomeScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Button:
            text: "‚öôÔ∏è"
            font_name: "data/NotoEmoji.ttf"
            font_size: root.width * 0.02
            size_hint: 0.17, 0.05
            pos_hint: {"center_x": 0.1, "center_y": 0.92}
            on_release: Factory.SettingsPopup().open()

        Button:
            text: app.get_text(1)
            font_size: root.width * 0.02
            size_hint: 0.17, 0.05
            pos_hint: {"center_x": 0.9, "center_y": 0.92}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "howto"

        Label:
            text: app.get_text(2)
            font_name: "data/DejaVuSansMono-Bold.ttf"
            font_size: root.width * 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            text: app.get_text(3)
            font_name: "data/Montserrat-Italic.ttf"
            font_size: root.width * 0.04
            italic: True
            pos_hint: {"center_x": 0.5, "center_y": 0.8}

        Button:
            text: app.get_text(4)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.57}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "manage"

        Button:
            text: app.get_text(5)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.37}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "startsession"

        Button:
            text: app.get_text(6)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.17}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "past"


<HowToScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    ScrollView:
        BoxLayout:

            orientation: "vertical"
            size_hint_y: None
            size_hint_x: None
            height: self.minimum_height
            width: root.width
            spacing: "45sp"
            padding: "30sp"

            Button:
                text: app.get_text(7)
                font_size: root.width * 0.03
                size_hint_x: 0.3
                size_hint_y: None
                pos_hint: {"x": 0.01}
                height: "45sp"
                on_release:
                    root.manager.transition.direction = "right"
                    app.root.current = "home"

            Label:
                text: app.get_text(1)
                font_size: root.width * 0.07
                size_hint_y: None

            Label:
                text: app.get_text(8)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None

            Label:
                text: app.get_text(9)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None

            Label:
                text: app.get_text(10)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None

            Label:
                text: app.get_text(11)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None

            Label:
                text: app.get_text(12)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None

            Label:
                text: app.get_text(74)
                font_size: root.width * 0.03
                text_size: self.width, None
                halign: "left"
                valign: "top"
                height: self.texture_size[1]
                size_hint_x: 1
                size_hint_y: None


<ManageScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Button:
            text: app.get_text(78)
            font_size: root.width * 0.03
            size_hint: 0.26, 0.05
            pos_hint: {"x": 0.7, "center_y": 0.95}
            on_release:
                root.open_backup_popup()

        Label:
            text: app.get_text(4)
            font_size: root.width * 0.07
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Button:
            text: app.get_text(13)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.65}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "addplan"

        Button:
            text: app.get_text(14)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.50}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "editplan"

        Button:
            text: app.get_text(15)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.35}
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "delplan"

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "home"


<AddPlanScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(13)
            font_size: root.width * 0.07
            pos_hint: {"center_x": 0.5, "center_y": 0.9}

        TextInput:
            id: name_input
            hint_text: app.get_text(16)
            font_size: root.width * 0.045
            bold: True
            size_hint: 0.7, 0.065
            pos_hint: {"center_x": 0.5, "center_y": 0.77}

        TextInput:
            id: exercise_input
            font_size: root.width * 0.045
            size_hint: 0.7, 0.065
            pos_hint: {"center_x": 0.5, "center_y": 0.62}

        Button:
            text: app.get_text(17)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.45}
            on_release: root.add_exercise()

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.38}

        Button:
            text: app.get_text(18)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            background_color: 0, 0.5, 0.7, 1
            background_normal: ""
            on_release: root.save_plan()

        Button:
            text: app.get_text(19)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release: root.open_popup()


<EditPlanScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(14)
            font_size: root.width * 0.07
            pos_hint: {"center_x": 0.5, "center_y": 0.9}

        Spinner:
            id: edit_spinner
            text: app.get_text(20)
            font_size: root.width * 0.04
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            on_text: root.on_plan_selected(self.text)

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.65}

        RecycleView:
            size_hint: 1, 0.6
            id: edit_rv
            viewclass: 'ExerciseRow'
            RecycleBoxLayout:
                orientation: 'vertical'
                default_size: None, dp(50)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10)
                padding: dp(30)

        Button:
            id: apply_btn
            text: app.get_text(21)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.05, "y": 0.07}
            background_color: 0, 0.5, 0.7, 1
            background_normal: ""
            on_release: root.open_popup()

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "manage"


<ExerciseRow@BoxLayout>:
    exercise_name: ""
    orientation: "horizontal"
    size_hint_y: None
    size_hint_x: 1
    height: sp(100)
    is_add_row: False

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Line:
            width: 1
            rectangle: (self.x, self.y, self.width, self.height)

    Label:
        text: root.exercise_name
        font_size: root.width * 0.05
        text_size: self.size
        size_hint_x: 0.3 if not root.is_add_row else 0
        width: self.width if not root.is_add_row else 0
        halign: "center"
        opacity: 1 if not root.is_add_row else 0
        disabled: root.is_add_row

    Button:
        text: "üóëÔ∏è"
        font_name: "data/NotoEmoji.ttf"
        size_hint_x: 0.12 if not root.is_add_row else 0
        width: self.width if not root.is_add_row else 0
        opacity: 1 if not root.is_add_row else 0
        disabled: root.is_add_row
        on_release: root.rm_callback(root.exercise_name) if root.rm_callback else None

    TextInput:
        hint_text: app.get_text(22)
        font_size: root.width * 0.04
        multiline: False
        size_hint_x: 1 if root.is_add_row else 0
        width: self.width if root.is_add_row else 0
        opacity: 1 if root.is_add_row else 0
        disabled: not root.is_add_row
        on_text_validate: root.add_callback(self.text) if root.is_add_row else None


<DelPlanScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(15)
            font_size: root.width * 0.07
            pos_hint: {"center_x": 0.5, "center_y": 0.9}

        Spinner:
            id: delplan_spinner
            text: app.get_text(20)
            font_size: root.width * 0.04
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.75}

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.4}

        Button:
            text: app.get_text(23)
            font_size: root.width * 0.04
            background_color: 1, 0, 0, 1
            background_normal: ""
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            on_release: root.open_popup()

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "manage"


<StartSessionScreen>:
    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(5)
            font_size: root.width * 0.07
            pos_hint: {"center_x": 0.5, "center_y": 0.9}

        Spinner:
            id: workout_spinner
            text: app.get_text(24)
            font_size: root.width * 0.04
            size_hint: 0.75, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.73}

        Label:
            text: app.get_text(25)
            font_size: root.width * 0.04
            size_hint: 0.3, 0.08
            pos_hint: {"center_x": 0.16, "center_y": 0.58}

        TextInput:
            id: date_input
            font_size: root.width * 0.04
            size_hint: 0.5, 0.045
            pos_hint: {"center_x": 0.5, "center_y": 0.58}

        Button:
            text: app.get_text(26)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.4}
            background_color: 0, 0.5, 0.7, 1
            background_normal: ""
            on_release: root.start_session()

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            bold: True

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "home"


<SessionScreen>:
    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            id: date_label
            font_size: root.width * 0.02
            bold: True
            pos_hint: {"center_x": 0.88, "center_y": 0.94}

        Button:
            id: prev_btn
            text: app.get_text(27)
            font_size: root.width * 0.017
            italic: True
            size_hint: 0.25, 0.05
            pos_hint: {"center_x": 0.14, "center_y": 0.92}
            on_release: root.open_prev_popup()

        Label:
            id: exerset_label
            font_size: root.width * 0.05
            size_hint: 0.7, 0.15
            pos_hint: {"center_x": 0.5, "center_y": 0.87}

        TextInput:
            id: weight_input
            hint_text: app.get_text(28)
            font_size: root.width * 0.04
            size_hint: 0.65, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.78}

        TextInput:
            id: reps_input
            hint_text: app.get_text(29)
            font_size: root.width * 0.04
            size_hint: 0.65, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.68}

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            bold: True

        Button:
            text: app.get_text(30)
            font_size: root.width * 0.028
            size_hint: 0.28, 0.1
            pos_hint: {"center_x": 0.15, "center_y": 0.49}
            on_release: root.prev_exercise()

        Button:
            text: app.get_text(31)
            font_size: root.width * 0.028
            size_hint: 0.28, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.49}
            on_release: root.add_set()

        Button:
            text: app.get_text(32)
            font_size: root.width * 0.028
            size_hint: 0.28, 0.1
            pos_hint: {"center_x": 0.85, "center_y": 0.49}
            on_release: root.next_exercise()

        TextInput:
            id: comment_input
            hint_text: app.get_text(33)
            font_name: "data/Montserrat-Italic.ttf"
            font_size: root.width * 0.03
            size_hint: 0.5, 0.04
            pos_hint: {"center_x": 0.5, "center_y": 0.35}

        Button:
            id: save_btn
            text: app.get_text(34)
            font_size: root.width * 0.041
            size_hint: 0.55, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.22}
            background_color: 0, 0.5, 0.7, 1
            background_normal: ""
            on_release: root.save_session()
            opacity: 0
            disabled: True

        Button:
            text: app.get_text(19)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.07}
            on_release: Factory.CancelPopup().open()


<PastScreen>:

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.25, 0.04
            pos_hint: {"center_x": 0.14, "center_y": 0.92}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "home"

        Label:
            text: app.get_text(6)
            font_size: root.width * 0.07
            size_hint: 0.4, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.86}

        Spinner:
            id: plan_spinner
            font_size: root.width * 0.04
            size_hint: 0.5, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.78}

        Label:
            id: feedback_label
            font_size: root.width * 0.03
            bold: True
            size_hint: 0.6, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.72}

        Button:
            text: app.get_text(35)
            font_size: root.width * 0.035
            size_hint: 0.37, 0.06
            pos_hint: {"center_x": 0.5, "center_y": 0.65}
            on_release: root.show_past_workouts()

        Button:
            text: app.get_text(36)
            font_size: root.width * 0.035
            size_hint: 0.37, 0.06
            pos_hint: {"center_x": 0.5, "center_y": 0.58}
            on_release:
                root.edit_or_show(False)

        Button:
            text: app.get_text(75)
            font_size: root.width * 0.03
            size_hint: 0.25, 0.04
            pos_hint: {"center_x": 0.86, "center_y": 0.92}
            on_release:
                root.open_stat_screen()

        Spinner:
            id: date_spinner
            opacity: 0
            disabled: True
            font_size: root.width * 0.02
            size_hint: 0.3, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.42}

        Button:
            id: edit_btn
            opacity: 0
            disabled: True
            text: app.get_text(37)
            font_size: root.width * 0.02
            size_hint: 0.27, 0.04
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            background_color: 0, 0.5, 0.7, 1
            background_normal: ""
            on_release: root.switch_to_editor()

        Button:
            id: del_btn
            opacity: 0
            disabled: True
            text: app.get_text(23)
            font_size: root.width * 0.02
            size_hint: 0.27, 0.04
            pos_hint: {"center_x": 0.5, "center_y": 0.18}
            background_color: 1, 0.3, 0, 1
            background_normal: ""
            on_release: root.open_delwrk_popup()

        RecycleView:
            id: main_rv
            size_hint_y: 0.4
            viewclass: "WorkoutLabel"

            RecycleBoxLayout:
                default_size: None, None
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(10)

<WorkoutLabel@Label>:
    size_hint_y: None
    text_size: self.width, None
    font_name: "data/DejaVuSansMono-Bold.ttf"
    font_size: self.width * 0.025
    height: self.texture_size[1] + dp(10)
    halign: "center"
    valign: "middle"
    padding: dp(10), dp(10)


<StatScreen>:
    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(75)
            font_name: "data/DejaVuSansMono-Bold.ttf"
            font_size: root.width * 0.045
            size_hint: 0.5, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.95}

        Label:
            id: workout_label
            font_name: "data/Montserrat-Italic.ttf"
            font_size: root.width * 0.027
            size_hint: 0.5, 0.06
            pos_hint: {"center_x": 0.5, "center_y": 0.92}

        RecycleView:
            size_hint: 1, 0.8
            pos_hint: {"center_x": 0.5, "y": 0.1}
            id: stat_rv
            viewclass: 'StatRow'
            RecycleBoxLayout:
                orientation: 'vertical'
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(50)
                padding: dp(40)

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.03
            size_hint: 0.3, 0.07
            pos_hint: {"x": 0.65, "y": 0.05}
            on_release:
                root.manager.transition.direction = "right"
                app.root.current = "past"


<StatRow@BoxLayout>:
    stat_name: ""
    stat_value: ""
    orientation: "vertical"
    size_hint_y: None
    height: content.minimum_height + dp(10)

    BoxLayout:
        id: content
        orientation: "vertical"
        size_hint_y: None
        height: self.minimum_height

        Label:
            text: root.stat_name + "\n"
            font_name: "data/DejaVuSansMono-Bold.ttf"
            font_size: root.width * 0.032
            color: 1, 1, 1, 1
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: root.stat_value + "\n"
            font_size: root.width * 0.032
            color: 1, 1, 1, 1
            size_hint_y: None
            height: self.texture_size[1]

        Widget:
            size_hint_y: None
            height: dp(1)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size


<CancelPopup@PopUp>:
    title: app.get_text(19)
    size_hint: 0.8, 0.7
    auto_dismiss: True

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(38)
            font_size: root.width * 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            text: app.get_text(39)
            font_size: root.width * 0.03
            pos_hint: {"center_x": 0.5, "center_y": 0.75}

        Button:
            text: app.get_text(40)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release:
                root.dismiss()
                app.root.transition.direction = "right"
                app.root.current = "home"

        Button:
            text: app.get_text(41)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            on_release: root.dismiss()


<DelWrkPopup@Popup>:
    title: app.get_text(49)
    size_hint: 0.8, 0.7
    auto_dismiss: False

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(42)
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            id: wrk_date_label
            font_size: root.width * 0.03
            pos_hint: {"center_x": 0.5, "center_y": 0.75}

        Button:
            text: app.get_text(41)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            on_release: root.dismiss()

        Button:
            text: app.get_text(40)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release:
                root.del_workout()
                root.dismiss()
                app.root.transition.direction = "right"
                app.root.current = "home"


<DelPlanPopup@Popup>:
    title: app.get_text(15)
    size_hint: 0.8, 0.7
    auto_dismiss: False

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(38)
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            text: app.get_text(43)
            font_size: root.width * 0.03
            pos_hint: {"center_x": 0.5, "center_y": 0.75}

        Button:
            text: app.get_text(41)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            on_release: root.dismiss()

        Button:
            text: app.get_text(40)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release:
                root.del_plan()
                root.dismiss()
                app.root.transition.direction = "right"
                app.root.current = "home"


<EditPlanPopup@Popup>:
    title: app.get_text(14)
    size_hint: 0.8, 0.7
    auto_dismiss: False

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(44)
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            text: app.get_text(45)
            font_size: root.width * 0.03
            pos_hint: {"center_x": 0.5, "center_y": 0.75}

        Button:
            text: app.get_text(41)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            on_release: root.dismiss()

        Button:
            text: app.get_text(40)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release:
                root.apply_changes()
                root.dismiss()
                app.root.transition.direction = "right"
                app.root.current = "home"


<BackupPopup@Popup>:
    title: app.get_text(78)
    size_hint: 0.8, 0.8
    auto_dismiss: True

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(79)
            font_name: "data/DejaVuSansMono-Bold.ttf"
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.9}

        Spinner:
            id: plan_spinner
            text: app.get_text(20)
            font_size: root.width * 0.03
            size_hint: 0.5, 0.06
            pos_hint: {"center_x": 0.5, "center_y": 0.8}

        Label:
            id: feedback_label
            font_size: root.width * 0.025
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.6}

        Button:
            text: app.get_text(81)
            font_size: root.width * 0.035
            size_hint: 0.5, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            on_release: root.export_csv()


<PrevPopup@Popup>:
    title: app.get_text(27)
    size_hint: 0.8, 0.8
    auto_dismiss: True

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            id: prev_label
            font_name: "data/DejaVuSansMono-Bold.ttf"
            font_size: root.width * 0.027
            text_size: self.width, None
            bold: True
            halign: "center"
            valign: "top"
            height: self.texture_size[1]
            size_hint: 0.8, 0.8
            pos_hint: {"center_x": 0.5, "center_y": 0.6}

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.025
            size_hint: 0.4, 0.1
            pos_hint: {"center_x": 0.8, "center_y": 0.1}
            on_release: root.dismiss()


<WarningPopup@Popup>:
    title: app.get_text(46)
    size_hint: 0.8, 0.8
    auto_dismiss: True

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(46)
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Button:
            text: app.get_text(40)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release: app.stop()

        Button:
            text: app.get_text(41)
            font_size: root.width * 0.04
            size_hint: 0.5, 0.2
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            on_release: root.dismiss()


<SettingsPopup@Popup>:
    title: app.get_text(47)
    size_hint: 0.8, 0.8
    auto_dismiss: True

    canvas.before:
        Color:
            rgba: 0.15, 0.15, 0.15, 1
        Rectangle:
            pos: self.pos
            size: self.size

    FloatLayout:

        Label:
            text: app.get_text(47)
            font_size: root.width * 0.05
            size_hint: 0.7, 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        BoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint: 0.8, 0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.7}

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    rectangle: (self.x, self.y, self.width, self.height)
                    width: 1.5

            Label:
                text: app.get_text(48)
                halign: "center"
                valign: "middle"
                text_size: self.size
                font_size: root.width * 0.04
                size_hint_x: 0.4

            Spinner:
                text: app.get_current_lang(for_file=False)
                values: ["English", "–†—É—Å—Å–∫–∏–π", "Deutsch"]
                font_size: root.width * 0.03
                size_hint_x: 0.6
                on_text: app.change_language(self.text)

        Label:
            text: app.get_text(73)
            font_color: 0, 0.2, 0.7, 0.8
            font_size: root.width * 0.025
            size_hint: 0.4, 0.05
            pos_hint: {"center_x": 0.5, "center_y": 0.6}

        Button:
            text: app.get_text(7)
            font_size: root.width * 0.025
            size_hint: 0.4, 0.1
            pos_hint: {"center_x": 0.8, "center_y": 0.1}
            on_release: root.dismiss()
